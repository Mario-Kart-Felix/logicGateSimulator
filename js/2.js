(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{116:function(t,e,n){},117:function(t,e,n){},119:function(t,e,n){},120:function(t,e,n){},127:function(t,e,n){t.exports=n.p+"2d45038d1cbe2213570135dd0a624d73.ico"},167:function(t,e,n){"use strict";n.r(e);var r=n(7),a=n.n(r),i=(n(82),n(83),n(84),n(21)),o=n(128),u=n(151),l=n(86),s=Object(o.a)({palette:{type:"dark",primary:u.a,secondary:l.a}}),c={simulationMode:{project:"gamepad",ic:"memory"}},f=n(157),p=regeneratorRuntime.mark(m);function m(t,e){var n,r,a,i,o,u,l,s,c,f,m,d;return regeneratorRuntime.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:n=!0,r=!1,a=void 0,p.prev=3,i=t[Symbol.iterator]();case 5:if(n=(o=i.next()).done){p.next=36;break}u=o.value,l=!0,s=!1,c=void 0,p.prev=10,f=e[Symbol.iterator]();case 12:if(l=(m=f.next()).done){p.next=19;break}return d=m.value,p.next=16,[u,d];case 16:l=!0,p.next=12;break;case 19:p.next=25;break;case 21:p.prev=21,p.t0=p.catch(10),s=!0,c=p.t0;case 25:p.prev=25,p.prev=26,l||null==f.return||f.return();case 28:if(p.prev=28,!s){p.next=31;break}throw c;case 31:return p.finish(28);case 32:return p.finish(25);case 33:n=!0,p.next=5;break;case 36:p.next=42;break;case 38:p.prev=38,p.t1=p.catch(3),r=!0,a=p.t1;case 42:p.prev=42,p.prev=43,n||null==i.return||i.return();case 45:if(p.prev=45,!r){p.next=48;break}throw a;case 48:return p.finish(45);case 49:return p.finish(42);case 50:case"end":return p.stop()}},p,null,[[3,38,42,50],[10,21,25,33],[26,,28,32],[43,,45,49]])}function d(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v,y=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=e,this.scale=n,this.rotation=r}var e,n,r;return e=t,(n=[{key:"getBoundingBox",value:function(){return[].concat(d(this.position),d(this.scale))}},{key:"getPoints",value:function(){var t=this;return Array.from(m([0,1],[0,1])).map(function(e){return[t.x+t.height*e[0],t.y+t.width*e[1]]})}},{key:"getEdges",value:function(){for(var t=this.getPoints(),e=[],n=0;n<t.length;n++)e.push([t[n],t[(n+1)%t.length]]);return e}},{key:"x",get:function(){return this.position[0]},set:function(t){this.position=[t,this.y]}},{key:"y",get:function(){return this.position[1]},set:function(t){this.position=[this.x,t]}},{key:"width",get:function(){return this.scale[0]},set:function(t){this.scale=[t,this.height]}},{key:"height",get:function(){return this.scale[1]},set:function(t){this.scale=[this.width,t]}},{key:"minX",get:function(){return Math.min(this.x,this.x+this.width)}},{key:"maxX",get:function(){return Math.max(this.x,this.x+this.width)}},{key:"minY",get:function(){return Math.min(this.y,this.y+this.height)}},{key:"maxY",get:function(){return Math.max(this.y,this.y+this.height)}},{key:"center",get:function(){return[this.x+this.width/2,this.y+this.height/2]}}])&&h(e.prototype,n),r&&h(e,r),t}(),g=n(154),b=n(156),w=n(99),S=n(172),k=n(162),x=n(170),O=n(158),j=n(159),E=n(173),P=n(163),A=n(152),C=n(160),T=n(42);function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var I=Object(T.a)(1/0)(v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,localStorage.getItem(e)||localStorage.setItem(e,"{}")}var e,n,r;return e=t,(n=[{key:"getAll",value:function(){var t=localStorage.getItem(this.name);if(t)return JSON.parse(t);throw new Error("An error occured when accesing ".concat(this.name," in the local storage!"))}},{key:"ls",value:function(){return Object.keys(this.getAll())}},{key:Symbol.iterator,value:regeneratorRuntime.mark(function t(){var e,n,r,a,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=!0,n=!1,r=void 0,t.prev=3,a=this.ls()[Symbol.iterator]();case 5:if(e=(i=a.next()).done){t.next=11;break}return o=i.value,t.abrupt("return",this.get(o));case 8:e=!0,t.next=5;break;case 11:t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),n=!0,r=t.t0;case 17:t.prev=17,t.prev=18,e||null==a.return||a.return();case 20:if(t.prev=20,!n){t.next=23;break}throw r;case 23:return t.finish(20);case 24:return t.finish(17);case 25:case"end":return t.stop()}},t,this,[[3,13,17,25],[18,,20,24]])})},{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index";return this.getAll()[t]}},{key:"set",value:function(t,e){var n=t,r=e;"string"==typeof t&&void 0!==e||(n="index",r=t);var a=this.getAll();a[n]=r,localStorage.setItem(this.name,JSON.stringify(a))}},{key:"delete",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"index",e=this.getAll();delete e[t],localStorage.setItem(this.name,JSON.stringify(e))}}])&&_(e.prototype,n),r&&_(e,r),t}())||v,M=[{metadata:{name:"and"},material:{type:"image",value:n(87)},code:{activation:"context.set(0, context.get(0) && context.get(1))"},pins:{inputs:{count:2}},info:["https://en.wikipedia.org/wiki/AND_gate"]},{metadata:{name:"or"},material:{type:"image",value:n(88)},code:{activation:"context.set(0, context.get(0) || context.get(1))"},pins:{inputs:{count:2}},info:["https://en.wikipedia.org/wiki/OR_gate"]},{metadata:{name:"nor"},material:{type:"image",value:n(89)},code:{activation:"context.set(0, !(context.get(0) || context.get(1)))"},pins:{inputs:{count:2}},info:["https://en.wikipedia.org/wiki/NOR_gate"]},{metadata:{name:"xor"},material:{type:"image",value:n(90)},code:{activation:"\n            const a = context.get(0)\n            const b = context.get(1)\n            const c = (a || b) && (!a || !b)\n            \n            context.set(0, c)"},info:["https://en.wikipedia.org/wiki/XOR_gate"],pins:{inputs:{count:2}}},{metadata:{name:"not"},material:{value:"red"},code:{activation:"context.set(0, !context.get(0))"},info:["https://en.wikipedia.org/wiki/Inverter_(logic_gate)"]},{metadata:{name:"button"},material:{value:"red"},code:{onClick:"\n                const old = context.memory.state\n                const state = !old\n\n                context.set(0, state)    \n                context.color(old ? 'red' : '#550000')\n\n                context.memory.state = state\n            "},pins:{inputs:{count:0}},integration:{input:!0},info:["https://en.wikipedia.org/wiki/Push-button"]},{metadata:{name:"light bulb"},shape:{radius:50},material:{value:"white"},code:{activation:"\n                context.color(context.get(0) ? 'yellow' : 'white')\n            "},integration:{output:!0},info:["https://en.wikipedia.org/wiki/Incandescent_light_bulb"],pins:{outputs:{count:0}}}],R={camera:{transform:{position:[0,0],scale:[1,1],rotation:0}},simulation:{gates:[],mode:"project",wires:[],name:"default"}},N=(n(91),function(t){return a.a.createElement("div",{className:"toast-content-container"},a.a.createElement(A.a,{id:"toast-content-icon"},t.icon),a.a.createElement("div",{id:"toast-content-message"},t.message))}),W=function(t,e){return[e?a.a.createElement(N,{message:t,icon:e}):t,{position:"bottom-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0}]},D=new g.a("english");function q(t){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function z(t,e){return!e||"object"!==q(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function F(t){var e="function"==typeof Map?new Map:void 0;return(F=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return L(t,arguments,X(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Y(r,t)})(t)}function L(t,e,n){return(L=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var a=new(Function.bind.apply(t,r));return n&&Y(a,n.prototype),a}).apply(null,arguments)}function Y(t,e){return(Y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function X(t){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var B,H=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=z(this,X(e).call(this))).mesagge=n,t}var n,r,a;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Y(t,e)}(e,F(Error)),n=e,(r=[{key:"toString",value:function(){return"SimulationError: ".concat(this.mesagge)}}])&&G(n.prototype,r),a&&G(n,a),e}();function J(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var U=(J(B={english:{language:"english",sidebar:{createSimulation:"Create simulation",logicGates:"Logic gates",openSimulation:"Open simulations",simulation:"Simulation",language:"Language"},createSimulation:{mode:{question:"What kind of simulation do you want to create?",options:{ic:"Integrated circuit",project:"Project"}},name:{question:"What do you want your simulation to be called?"}},actions:{save:"Save",clean:"Clean",refresh:"Refresh",undo:"Undo","select all":"Select all","delete selection":"Delete selection","delete simulation":"Delete simulation"},messages:{createdSimulation:function(t){return"Succesfully created simulation '".concat(t,"'")},switchedToSimulation:function(t){return"Succesfully switched to simulation '".concat(t,"'")},savedSimulation:function(t){return"Succesfully saved simulation '".concat(t,"'")},compiledIc:function(t){return"Succesfully compiled circuit '".concat(t,"'")},cleaned:function(t){return"Succesfully cleaned simulation '".concat(t,"'")},refreshed:function(t){return"Succesfully refreshed simulation '".concat(t,"'")},undone:function(t){return"Succesfully undone simulation '".concat(t,"'")},deletedSimulation:function(t){return"Succesfully deleted simulation '".concat(t,"'")}}}},"română",{language:"română",sidebar:{createSimulation:"Creează o simulație",openSimulation:"Deschide o simulație",logicGates:"Porți logice",simulation:"Simulație",language:"Limba"},createSimulation:{mode:{question:"Ce fel de simulație vrei să creezi?",options:{ic:"Circuit integrat",project:"Proiect"}},name:{question:"Cum vrei să numești simulația?"}},actions:{save:"Salvează","delete selection":"Șterge selecția","select all":"Selectează totul",clean:"Curăță",refresh:"Reîncarcă",undo:"Întoarce","delete simulation":"Șterge simulația"},messages:{createdSimulation:function(t){return"Simulația '".concat(t,"' a fost creeată cu succes")},switchedToSimulation:function(t){return"Simulația '".concat(t,"' a fost deschisă cu succes")},savedSimulation:function(t){return"Simulația '".concat(t,"' a fost salvată cu succes")},compiledIc:function(t){return"Simulația '".concat(t,"' a fost compilată cu succes")},cleaned:function(t){return"Simulația '".concat(t,"' a fost curățată cu succes")},refreshed:function(t){return"Simulația '".concat(t,"' a fost reîncărcată cu succes")},undone:function(t){return"Acțiunea a fost întoarsă"},deletedSimulation:function(t){return"Simulația '".concat(t,"' a fost ștearsă cu succes")}}}),J(B,"dutch",{language:"dutch",sidebar:{createSimulation:"Maak simulatie",logicGates:"Logische poorten",openSimulation:"Open simulatie",simulation:"Todo",language:"Taal"},actions:{"delete selection":"Todo","select all":"Todo",clean:"Todo",refresh:"Todo",save:"Todo",undo:"Todo","delete simulation":"Todo"},createSimulation:{mode:{question:"Wat voor simulatie wil je maken?",options:{ic:"IC",project:"Project"}},name:{question:"Hoe wil je je simulatie noemen?"}},messages:{createdSimulation:function(t){return"Simulatie '".concat(t,"' succesvol gecreerd")},switchedToSimulation:function(t){return"Succesvol veranderd naar simulatie '".concat(t,"'")},savedSimulation:function(t){return"Simulatie succesvol opgeslagen '".concat(t,"'")},compiledIc:function(t){return"IC gecompileerd: ".concat(t)},cleaned:function(t){return"".concat(t," gewist")},refreshed:function(t){return"".concat(t," ververst")},undone:function(t){return"".concat(t," ongedaan gemaakt")},deletedSimulation:function(t){return"Todo"}}}),B),K=["english","română","dutch"],Q=new I("language");Q.get()||Q.set("english"),D.next(Q.get()||"english");var V={set:function(t){Q.set(t),D.next(t)},get:function(){var t=Q.get();if(!t)throw new H("Current language not found");return t},getTranslation:function(){return U[V.get()]}},Z=new I("templates");function $(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.gate=n,this.state=new g.a(!1),this.pairs=new Set,this.subscriptions=[]}var e,n,r;return e=t,(n=[{key:"addPair",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(r&&this.pairs.add(t),n){var a=t.state.subscribe(function(t){e.state.next(t)});this.subscriptions.push({data:t,subscription:a})}}},{key:"removePair",value:function(t){this.pairs.delete(t);var e=!0,n=!1,r=void 0;try{for(var a,i=this.subscriptions[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;o.data===t&&o.subscription.unsubscribe()}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}this.subscriptions=this.subscriptions.filter(function(e){return e.data!==t})}},{key:"dispose",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=this.subscriptions[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.subscription.unsubscribe()}}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}}}])&&$(e.prototype,n),r&&$(e,r),t}(),et=new I("id"),nt={generate:function(){var t=et.get();return void 0===t?(et.set(1),1):(et.set(t+1),t+1)}},rt=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var a="return (".concat(n.join(","),") => {\n        ").concat(t,"\n    }");return new Function(a)()},at=n(155),it=n(169),ot=function(t){var e=[];return t.simulation.debounce.enabled&&e.push(Object(at.a)(t.simulation.debounce.time)),t.simulation.throttle.enabled&&e.push(Object(it.a)(t.simulation.throttle.time)),e},ut=n(129),lt=n(68),st=n.n(lt);function ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ft=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=!1,this.pressed=[],this.keys=void 0,this.valueChanges=new ut.a,this.subscription=[];for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];this.keys=r,this.subscription.push(Object(b.a)(document,"keydown").subscribe(function(t){var n=e.pressed.length,r=!0,a=!1,i=void 0;try{for(var o,u=e.keys[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;l==st()(t)&&-1==e.pressed.indexOf(l)&&e.pressed.push(l)}}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}0==n&&0!=e.pressed.length&&(e.value=!0,e.valueChanges.next(e.value))})),this.subscription.push(Object(b.a)(document,"keyup").subscribe(function(t){var n=e.pressed.length,r=!0,a=!1,i=void 0;try{for(var o,u=e.keys[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;l==st()(t)&&-1!=e.pressed.indexOf(l)&&e.pressed.splice(e.pressed.indexOf(l),1)}}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}e.value&&n>0&&0==e.pressed.length&&(e.value=!1,e.valueChanges.next(e.value))}))}var e,n,r;return e=t,(n=[{key:"dispose",value:function(){this.subscription.forEach(function(t){return t.unsubscribe()}),this.value=!1,this.valueChanges.next(!1),this.valueChanges.complete()}}])&&ct(e.prototype,n),r&&ct(e,r),t}(),pt={dnd:{rotation:Math.PI/12},gates:{connectionLength:30,pinRadius:10,pinStrokeColor:"#888888",pinStrokeWidth:3,pinFill:{open:"rgb(255,216,20)",closed:"rgb(90,90,90)"},gateStroke:{active:"yellow",normal:"black",width:4}},wires:{temporaryWireColor:"rgba(128,128,128,0.5)",curvePointOffset:100},spawning:{spawnOffset:30},selecting:{fill:"rgba(128,128,128,0.3)",stroke:"rgba(128,128,128,0.7)"}},mt=[100,100],dt=2,ht=2,vt=0,yt=0,gt=new ft("shift");function bt(t,e,n){return(bt=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var a=new(Function.bind.apply(t,r));return n&&wt(a,n.prototype),a}).apply(null,arguments)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function St(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var kt={memory:new Map,set:function(t){kt.memory.has(t)||kt.memory.set(t,function(t){var e=bt(Image,St(mt));return e.src=t,e}(t))},get:function(t){var e=kt.memory.get(t);if(!e)throw new H("Cannot get image ".concat(t));return e}},xt=n(22),Ot=n.n(xt),jt={metadata:{name:"Default template"},material:{type:"color",value:"blue"},pins:{inputs:{count:1,variable:!1},outputs:{count:1,variable:!1}},shape:{radius:10,rounded:!0,scale:[100,100]},code:{activation:"",onClick:"",initialisation:""},simulation:{debounce:{enabled:!0,time:1e3/60},throttle:{enabled:!1}},integration:{allowed:!0,input:!1,output:!1},info:[],tags:["base"]},Et=function(t){return Ot()(jt,t,{arrayMerge:function(t,e){return e}})};function Pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var At=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.start=e,this.end=n,this.id=void 0,this.active=!0,!r&&0!==n.value.pairs.size)throw new H("An input pin can only have 1 pair");n.value.addPair(e.value,!0,!r),e.value.addPair(n.value,!1,!r),this.id=void 0!==a?a:nt.generate()}var e,n,r;return e=t,(n=[{key:"dispose",value:function(){this.end.value.removePair(this.start.value),this.start.value.removePair(this.end.value),this.active=!1}}])&&Pt(e.prototype,n),r&&Pt(e,r),t}(),Ct=function(t,e){return e.end.value.gate===t||e.start.value.gate===t},Tt=function(t,e){return t.wires.filter(function(t){return Ct(e,t)})},_t=function(t,e){var n=t.gates.get(e.id);if(n){var r=!0,a=!1,i=void 0;try{for(var o,u=t.wires[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;Ct(e,l)&&l.dispose()}}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}t.wires=t.wires.filter(function(t){return t.active}),e.dispose(),t.gates.delete(n)}},It=function(t){var e=[],n=!0,r=!1,a=void 0;try{for(var i,o=t.gates[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value;Tt(t,u).length||e.push(u)}}catch(t){r=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}for(var l=0,s=e;l<s.length;l++){var c=s[l];_t(t,c)}};function Mt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Rt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Nt=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.transform=new y,this._pins={inputs:[],outputs:[]},this.id=void 0,this.template=void 0,this.functions={activation:null,onClick:null},this.subscriptions=[],this.memory={},this.ghostSimulation=void 0,this.ghostWires=[],this.isIntegrated=!1,this.env="global",this.template=Et(n),this.transform.scale=this.template.shape.scale,this.functions.activation=rt(this.template.code.activation,"context"),this.functions.onClick=rt(this.template.code.onClick,"context"),this._pins.inputs=t.generatePins(this.template.pins.inputs,1,this),this._pins.outputs=t.generatePins(this.template.pins.outputs,2,this),"image"===this.template.material.type&&kt.set(this.template.material.value),this.id=void 0!==r?r:nt.generate();var a=!0,i=!1,o=void 0;try{for(var u,l=this._pins.inputs[Symbol.iterator]();!(a=(u=l.next()).done);a=!0){var s,c=u.value,f=ot(this.template),p=(s=c.state).pipe.apply(s,Mt(f)).subscribe(function(){e.update()});this.subscriptions.push(p)}}catch(t){i=!0,o=t}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}if(this.init(),this.template.tags.includes("integrated")&&(this.isIntegrated=!0),this.isIntegrated){var m,d=ee.get(this.template.metadata.name);if(!d)throw new H("Cannot run ic ".concat(this.template.metadata.name," - save not found"));this.ghostSimulation=Xt(d.simulation,"gate"),It(this.ghostSimulation);var h=function(t,e){return t.transform.position[1]-e.transform.position[1]},v=Array.from(this.ghostSimulation.gates),g=v.filter(function(t){return t.template.integration.input}).sort(h).map(function(t){return t.wrapPins(t._pins.outputs)}).flat(),b=v.filter(function(t){return t.template.integration.output}).sort(h).map(function(t){return t.wrapPins(t._pins.inputs)}).flat();if(g.length!==this._pins.inputs.length)throw new H("Input count needs to match with the container gate: ".concat(g.length," !== ").concat(this._pins.inputs.length));if(b.length!==this._pins.outputs.length)throw new H("Output count needs to match with the container gate: ".concat(b.length," !== ").concat(this._pins.outputs.length));for(var w=this.wrapPins(this._pins.inputs),S=this.wrapPins(this._pins.outputs),k=0;k<g.length;k++)this.ghostWires.push(new At(w[k],g[k],!0));for(var x=0;x<b.length;x++)this.ghostWires.push(new At(b[x],S[x],!0));(m=this.ghostSimulation.wires).push.apply(m,Mt(this.ghostWires))}}var e,n,r;return e=t,r=[{key:"generatePins",value:function(t,e,n){return Mt(Array(t.count)).fill(!0).map(function(){return new tt(e,n)})}}],(n=[{key:"init",value:function(){rt(this.template.code.initialisation,"context")({memory:this.memory})}},{key:"onClick",value:function(){this.functions.onClick&&this.functions.onClick(this.getContext())}},{key:"dispose",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=this.pins[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.value.dispose()}}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}var i=!0,o=!1,u=void 0;try{for(var l,s=this.subscriptions[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){l.value.unsubscribe()}}catch(t){o=!0,u=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw u}}this.isIntegrated&&this.ghostSimulation.dispose()}},{key:"update",value:function(){if(this.template.tags.includes("integrated"));else{var t=this.getContext();if(!this.functions.activation)throw new H("Activation function is missing");this.functions.activation(t)}}},{key:"getContext",value:function(){var t=this;return{get:function(e){return t._pins.inputs[e].state.value},set:function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t._pins.outputs[e].state.next(n)},memory:this.memory,color:function(e){"color"===t.template.material.type&&(t.template.material.value=e)},enviroment:this.env}}},{key:"wrapPins",value:function(t){for(var e=[],n=t.length,r=0;r<n;r++)e.push({index:r,total:n,value:t[r]});return e}},{key:"pins",get:function(){return[].concat(Mt(this.wrapPins(this._pins.inputs)),Mt(this.wrapPins(this._pins.outputs)))}}])&&Rt(e.prototype,n),r&&Rt(e,r),t}();function Wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Dt,qt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.transform=new y([0,0])}var e,n,r;return e=t,(n=[{key:"toWordPostition",value:function(t){return[(t[0]-this.transform.position[0])/this.transform.scale[0],(t[1]-this.transform.position[1])/this.transform.scale[1]]}}])&&Wt(e.prototype,n),r&&Wt(e,r),t}();function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Dt=Symbol.iterator;var zt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.hashMap=new Map,this.head=new T.b(0,null),this.tail=new T.b(0,null),this.init()}var e,n,r;return e=t,(n=[{key:"init",value:function(){this.head.next=this.tail,this.tail.previous=this.head}},{key:"delete",value:function(t){return t.previous.next=t.next,t.next.previous=t.previous,this}},{key:"set",value:function(t,e){this.hashMap.set(t,e),this.addToHead(e)}},{key:"addToHead",value:function(t){return t.next=this.head.next,t.next.previous=t,t.previous=this.head,this.head.next=t,this}},{key:"moveOnTop",value:function(t){return this.delete(t).addToHead(t),this}},{key:"get",value:function(t){return this.hashMap.get(t)}},{key:"first",value:function(){var t=this.head.next;return t}},{key:Dt,value:regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e=this.tail;case 1:if(e.previous!==this.head){t.next=6;break}return t.abrupt("break",12);case 6:if(!e.previous.data){t.next=9;break}return t.next=9,e.previous.data;case 9:e=e.previous;case 10:t.next=1;break;case 12:case"end":return t.stop()}},t,this)})},{key:"clear",value:function(){this.hashMap=new Map,this.init()}}])&&Gt(e.prototype,n),r&&Gt(e,r),t}();function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Lt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"project",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"global";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mode=e,this.name=n,this.env=r,this.gates=new zt,this.wires=[]}var e,n,r;return e=t,(n=[{key:"push",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=0,a=e;r<a.length;r++){var i=a[r];i.env=this.env;var o=new T.b(i.id,i);this.gates.set(i.id,o)}}},{key:"dispose",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=this.gates[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.dispose()}}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}}}])&&Ft(e.prototype,n),r&&Ft(e,r),t}(),Yt=function(t){return new y(t.position,t.scale,t.rotation)},Xt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global",n=new Lt(t.mode,t.name,e),r=!0,a=!1,i=void 0;try{for(var o,u=t.gates[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,s=new Nt(Z.get(l.template),l.id);s.transform=Yt(l.transform),n.push(s)}}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}var c=!0,f=!1,p=void 0;try{for(var m,d=t.wires[Symbol.iterator]();!(c=(m=d.next()).done);c=!0){var h=m.value,v=n.gates.get(h.from.id),y=n.gates.get(h.to.id);if(v&&y&&v.data&&y.data){var g={index:h.from.index,total:h.from.total,value:v.data._pins.outputs[h.from.index]},b={index:h.to.index,total:h.to.total,value:y.data._pins.inputs[h.to.index]},w=new At(g,b,!1,h.id);n.wires.push(w)}}}catch(t){f=!0,p=t}finally{try{c||null==d.return||d.return()}finally{if(f)throw p}}return n},Bt=function(t){return{position:t.position,rotation:t.rotation,scale:t.scale}},Ht=function(t){return{id:t.value.gate.id,index:t.index,total:t.total}},Jt=function(t){return{from:Ht(t.start),to:Ht(t.end),id:t.id}},Ut=function(t){return{gates:Array.from(t.gates).map(Kt),wires:t.wires.map(Jt),mode:t.mode,name:t.name}},Kt=function(t){return{id:t.id,template:t.template.metadata.name,transform:Bt(t.transform)}},Qt=function(t){return{camera:(e=t.camera,{transform:Bt(e.transform)}),simulation:Ut(t.simulation)};var e};function Vt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Zt=function(t){var e=t.mode,n=t.name;t.gates;if("project"===e)throw new H("Cannot compile project");var r=V.getTranslation(),a=Xt(t);It(a);var o=Ut(a),u={metadata:{name:n},tags:["integrated"],pins:{inputs:{count:function(t){return t.filter(function(t){var e=Z.get(t.template);return e&&e.integration&&e.integration.input}).length}(o.gates)},outputs:{count:function(t){return t.filter(function(t){var e=Z.get(t.template);return e&&e.integration&&e.integration.output}).length}(o.gates)}}};Z.set(n,u),i.b.apply(void 0,Vt(W(r.messages.compiledIc(n),"markunread_mailbox")))};function $t(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var te=function(t,e){var n=function(t){return JSON.parse(JSON.stringify(t))}(R),r=V.getTranslation();return n.simulation.name=t,n.simulation.mode=e,ee.set(t,n),i.b.success.apply(i.b,$t(W(r.messages.createdSimulation(t),"check"))),"ic"===e&&Zt(n.simulation),n},ee=new I("saves");ee.ls().length||te("default","project");var ne=new I("currentSave");ne.get()||ne.set("default");var re=new g.a(null),ae=function(t){t.simulation.dispose(),t.lastMousePosition=[0,0],t.clearSelection(),t.selectedPins={end:null,start:null}};function ie(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var oe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";if(!re.value)throw new H("Renderer not found while trying to switch to simulation '".concat(t,"'"));var e=re.value,n=V.getTranslation();ae(e),ne.set(t),e.reloadSave(),i.b.apply(void 0,ie(W(n.messages.switchedToSimulation(t),"arrow_right_alt")))},ue=function(){var t=Object(f.a)(function(){return D},"english");return U[t]},le=function(){var t=re.value;if(!t)throw new H("Renderer not found");return t};function se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ce=new g.a([]),fe=function(){ce.next(ee.ls().sort())},pe=function(){var t=se(Object(r.useState)(null),2),e=t[0],n=t[1],i=Object(f.a)(function(){return ce},[]),o=ue(),u=function(){n(null)};return a.a.createElement(a.a.Fragment,null,a.a.createElement(x.a,{button:!0,onClick:function(t){fe(),n(t.currentTarget)}},a.a.createElement(O.a,null,a.a.createElement(A.a,null,"folder_open")),a.a.createElement(j.a,null,o.sidebar.openSimulation)),a.a.createElement(E.a,{keepMounted:!0,anchorEl:e,open:Boolean(e),onClose:u},i.filter(function(t){return i.length<2||t!==le().simulation.name}).map(function(t,e){var n=ee.get(t);if(!n)throw new H("Cannot get data for simulation ".concat(t));return a.a.createElement(P.a,{key:e,onClick:function(){oe(t),u()}},a.a.createElement(O.a,null,a.a.createElement(A.a,null,c.simulationMode[n.simulation.mode])),a.a.createElement(C.a,{style:{flexGrow:1}},t))})))},me=n(174);function de(t,e,n,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,a)}var he,ve,ye={get:(he=regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ye.open(e),t.next=3,ye.actions.pipe(Object(me.a)(1)).toPromise();case 3:if(n=t.sent,ye.close(),"quit"!==n){t.next=7;break}return t.abrupt("return",null);case 7:return t.abrupt("return",ye.data.output.value);case 8:case"end":return t.stop()}},t)}),ve=function(){var t=this,e=arguments;return new Promise(function(n,r){var a=he.apply(t,e);function i(t){de(a,n,r,i,o,"next",t)}function o(t){de(a,n,r,i,o,"throw",t)}i(void 0)})},function(t){return ve.apply(this,arguments)}),open:function(t){ye.data.open.next(!0),ye.data.output.next(""),ye.data.question.next(t)},close:function(){ye.data.open.next(!1)},data:{question:new g.a(""),output:new g.a(""),open:new g.a(!1)},actions:new ut.a};function ge(t,e,n,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,a)}var be,we={create:(be=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){ge(i,r,a,o,u,"next",t)}function u(t){ge(i,r,a,o,u,"throw",t)}o(void 0)})}}(regeneratorRuntime.mark(function t(){var e,n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return we.open(),t.next=3,we.actions.pipe(Object(me.a)(1)).toPromise();case 3:if(e=t.sent,n=V.getTranslation(),we.close(),"quit"!==e){t.next=8;break}return t.abrupt("return",null);case 8:return t.next=10,ye.get(n.createSimulation.name.question);case 10:if(r=t.sent){t.next=13;break}return t.abrupt("return",null);case 13:return t.abrupt("return",{mode:we.data.output.value,name:r});case 14:case"end":return t.stop()}},t)})),function(){return be.apply(this,arguments)}),open:function(){we.data.open.next(!0)},close:function(){we.data.open.next(!1)},data:{open:new g.a(!1),output:new g.a("project")},actions:new ut.a};function Se(t,e,n,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,a)}var ke=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){Se(i,r,a,o,u,"next",t)}function u(t){Se(i,r,a,o,u,"throw",t)}o(void 0)})}}(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,we.create();case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return n=te(e.name,e.mode),oe(e.name),t.abrupt("return",n);case 8:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),xe=function(){var t=ue();return a.a.createElement(x.a,{button:!0,className:"contained",onClick:ke},a.a.createElement(O.a,null,a.a.createElement(A.a,null,"note_add")),a.a.createElement(j.a,null,t.sidebar.createSimulation))},Oe=(n(116),new g.a([]));function je(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Ee=function t(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var a=n[0],i=n.slice(1),o=i.length>1?t.apply(void 0,je(i)):i[0];return a.map(function(t,e){return t+o[e]})},Pe=function(t){return t.map(function(t){return-t})},Ae=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},Ce=function(t,e){return t.map(function(t){return t*e})},Te=function(t,e){return Ee(e,Pe(t))},_e=function(t){return t[Math.floor(Math.random()*t.length)]},Ie={base:"house",imported:"share",integrated:"memory"},Me=function(t){var e=Et(Z.get(t)||{});if(!e)throw new H("Template ".concat(t," cannot be found"));return e},Re=new g.a(!1),Ne=function(){Re.next(!1)},We=function(){var t=Object(f.a)(function(){return Re},!1),e=Object(f.a)(function(){return Oe},[]),n=le();return a.a.createElement("div",{className:t?"visible":"",id:"logic-gate-modal-container",onClick:Ne},a.a.createElement("div",{className:"logic-gate-item"},"---"),e.map(Me).filter(function(t){return"project"===n.simulation.mode||t.metadata.name!==n.simulation.name}).map(function(t,e){var r=t.metadata.name;return a.a.createElement("div",{key:e,className:"logic-gate-item",onClick:function(){!function(t,e){var n=Z.get(e);if(!n)throw new H("Cannot find template ".concat(e));var r=new Nt(n),a=n.shape&&n.shape.scale?n.shape.scale:jt.shape.scale,i=Te(Ce(a,.5),Te(t.camera.transform.position,cn.center)),o=t.options.spawning.spawnOffset,u=Ce([o,o],t.spawnCount);r.transform.position=Ee(i,u),t.simulation.push(r),t.spawnCount++}(n,r)}},a.a.createElement(A.a,{className:"lgi-icon logic-gate-item-type"},Ie[t.tags[0]]),a.a.createElement(C.a,{className:"logic-gate-item-name"},r),t.info.length?a.a.createElement("a",{target:"_blank",className:"logic-gate-item-info",href:_e(t.info),onClick:function(t){t.stopPropagation()}},a.a.createElement(A.a,{className:"lgi-icon"},"info")):"")}))},De=function(){var t=ue();return a.a.createElement(x.a,{button:!0,onClick:function(){Oe.next(Z.ls()),Re.next(!0)}},a.a.createElement(O.a,null,a.a.createElement(A.a,null,"memory")),a.a.createElement(j.a,null,t.sidebar.logicGates))},qe=n(164),Ge=n(175),ze=function(){var t=V.get(),e=K.indexOf(t);V.set(K[(e+1)%K.length])},Fe=(n(117),function(){var t=ue();return a.a.createElement(k.a,null,a.a.createElement(x.a,{button:!0,onClick:ze,id:"language-button"},a.a.createElement(O.a,null,a.a.createElement(A.a,null,"language")),a.a.createElement(j.a,null,t.sidebar.language,": ",t.language)))});function Le(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ye(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Xe={clean:"cleaned",refresh:"refreshed",undo:"undone",save:"savedSimulation"},Be=function(t,e){return function(){var n=V.getTranslation(),r=le();e(r);var a=Xe[t];a&&i.b.apply(void 0,Ye(W(n.messages[a](r.simulation.name),$e[t])))}};function He(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Je=function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n=e instanceof Function?e:!1!==e.renderer?Be(t,e.run):e.run,He({},t,{name:t,action:function(){n(le())},icon:$e[t],keybinding:r})},Ue=function(t,e){return t.allSelectedIds().has(e)},Ke=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"temporary",n=arguments.length>2?arguments[2]:void 0;if(Ue(t,n)){if(t.selectedGates.permanent.has(n))return;"temporary"===e&&(t.selectedGates.temporary.delete(n),t.selectedGates.permanent.add(n))}else t.selectedGates[e].add(n)},Qe=function(t,e){var n=t.indexOf(e);return t[n]=t[t.length-1],t.pop()};function Ve(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var $e={clean:"clear",refresh:"refresh",save:"save",undo:"undo","select all":"select_all","delete selection":"delete","delete simulation":"delete_forever"},tn=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ve(n,!0).forEach(function(e){Ze(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ve(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},Je("save",function(t){var e=ne.get();if(!e)throw new H("Cannot save without knowing the name of the active simulation");var n=Qt(t),r=V.getTranslation();ee.set(e,n),"ic"===n.simulation.mode&&Zt(n.simulation),i.b.apply(void 0,Le(W(r.messages.savedSimulation(e),"save")))},["ctrl","s"]),{},Je("refresh",{run:function(t){t.loadSave(Qt(t))}},["ctrl","r"]),{},Je("undo",{run:function(t){t.reloadSave()}},["ctrl","z"]),{},Je("clean",{run:function(t){It(t.simulation)}},["ctrl","delete"]),{},Je("delete simulation",{run:function(t){var e=t.simulation.name,n=ee.ls();Qe(n,e),n.length||te("default","project");var r=_e(n);oe(r),ee.delete(e)}},["ctrl","shift","delete"]),{},Je("select all",function(t){var e=!0,n=!1,r=void 0;try{for(var a,i=t.simulation.gates[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value.id;Ke(t,"permanent",o)}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}},["ctrl","a"]),{},Je("delete selection",function(t){var e=!0,n=!1,r=void 0;try{for(var a,i=t.getSelected()[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;_t(t.simulation,o)}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}},["delete"]));function en(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=t[Symbol.iterator]();!(r=(o=u.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var nn=function(){var t=en(Object(r.useState)(null),2),e=t[0],n=t[1],i=ue();return a.a.createElement(a.a.Fragment,null,a.a.createElement(x.a,{button:!0,onClick:function(t){n(t.currentTarget)}},a.a.createElement(O.a,null,a.a.createElement(A.a,null,"insert_drive_file")),a.a.createElement(j.a,null,i.sidebar.simulation)),a.a.createElement(E.a,{keepMounted:!0,anchorEl:e,open:Boolean(e),onClose:function(){n(null)}},Object.values(tn).map(function(t,e){var n=t.icon,r=t.name,o=t.keybinding,u=t.action;return a.a.createElement(P.a,{key:e,onClick:u},a.a.createElement(O.a,null,a.a.createElement(A.a,null,n)),a.a.createElement(j.a,{primary:i.actions[r],secondary:(o||[]).join(" + ")}))})))},rn=Object(qe.a)(Object(Ge.a)({root:{display:"flex",zIndex:5},drawer:{width:240,zIndex:5,flexShrink:0},drawerPaper:{background:"#111111",padding:"4px",width:240,zIndex:5},list:{flexGrow:1}})),an=function(){var t=rn();return a.a.createElement("div",{className:t.root},a.a.createElement(S.a,{className:t.drawer,variant:"persistent",anchor:"right",open:!0,classes:{paper:t.drawerPaper}},a.a.createElement(k.a,{component:"nav",className:t.list},a.a.createElement(xe,null),a.a.createElement(pe,null),a.a.createElement(De,null),a.a.createElement(nn,null)),a.a.createElement(Fe,null)))},on=function(){return window.innerWidth-240},un=new g.a(on()),ln=new g.a(window.innerHeight),sn=Object(b.a)(window,"resize");sn.pipe(Object(w.a)(on)).subscribe(function(t){return un.next(t)}),sn.pipe(Object(w.a)(function(){return window.innerHeight})).subscribe(function(t){return ln.next(t)});var cn=new y;un.subscribe(function(t){cn.width=t}),ln.subscribe(function(t){cn.height=t});var fn=function(t){return function(e){t.next(function(t){return{button:t.button,position:[t.clientX,t.clientY]}}(e))}},pn=Object(r.forwardRef)(function(t,e){var n=Object(f.a)(function(){return un},0),r=Object(f.a)(function(){return ln},0);return a.a.createElement("canvas",{ref:e,width:n,height:r,onMouseDown:fn(t.mouseDownOuput),onMouseUp:fn(t.mouseUpOutput),onMouseMove:fn(t.mouseMoveOutput)})}),mn=n(118),dn=n.n(mn),hn=function(t,e){return t[0]>=e.minX&&t[0]<=e.maxX&&t[1]>=e.minY&&t[1]<=e.maxY},vn=Math.cos,yn=Math.sin,gn=function(t,e,n){var r=function(t,e){return[vn(e)*t[0]-yn(e)*t[1],yn(e)*t[0]+vn(e)*t[1]]}(Ee(t,Pe(e)),n);return Ee(r,e)},bn=function(t,e,n){return t.height/n*(2*e+1)/2},wn=function(t,e,n){var r=e>>1&1;return t.x+r*t.width-Number(!r)*n},Sn=function(t,e,n){return t+(e>>1&1)*n},kn=function(t,e,n){var r=t.options.gates.connectionLength,a=wn(e,n.value.type,t.options.gates.connectionLength),i=bn(e,n.index,n.total),o=Sn(a,n.value.type,r),u=i+e.y;return gn([o,u],e.center,e.rotation)},xn=[.1,10],On=[cn.width/2,cn.height],jn=function(){return ye.data.open.value||Re.value||we.data.open.value},En=function(t,e){Qe(t.wires,e),e.dispose()},Pn=function(t){return Array.from(t.values())},An=function(t,e){return!(t.maxX<e.minX||t.maxY<e.minY||t.minX>e.maxX||t.minY>e.maxY)},Cn=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(function(e){var n=e.transform;if(An(n,t))return!0;var r=!0,a=!1,i=void 0;try{for(var o,u=n.getPoints()[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;if(hn(l,t))return!0}}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}return!1})};function Tn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mn=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Lt("project","default");!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ref=e,this.simulation=r,this.mouseDownOutput=new ut.a,this.mouseUpOutput=new ut.a,this.mouseMoveOutput=new ut.a,this.wheelOutput=new ut.a,this.selectedGates={temporary:new Set,permanent:new Set},this.options=void 0,this.camera=new qt,this.selectedArea=new y,this.mouseState=0,this.lastMousePosition=[0,0],this.spawnCount=0,this.selectedPins={start:null,end:null},this.options=Ot()(pt,n),this.init()}var e,n,r;return e=t,(n=[{key:"init",value:function(){var t=this;this.mouseDownOutput.subscribe(function(e){var n=t.camera.toWordPostition(e.position),r=Array.from(t.simulation.gates);t.lastMousePosition=n;for(var a=r.length-1;a>=0;a--){var i=r[a],o=i.transform,u=i.id,l=i.pins;if(e.button===dt&&hn(n,o)){r[a].onClick(),t.mouseState|=1,Ue(t,u)||(t.clearSelection(),Ke(t,"temporary",u));var s=t.simulation.gates.get(u);if(s)return t.simulation.gates.moveOnTop(s);throw new H("Cannot find gate with id ".concat(u))}var c=!0,f=!1,p=void 0;try{for(var m,d=function(){var e,r,a,i=m.value,u=kn(t,o,i);if(e=n,r=u,a=t.options.gates.pinRadius,Ae(Te(e,r))<a){if(i.value.pairs.size&&1&i.value.type){var l=t.simulation.wires.find(function(t){return t.end.value===i.value});if(!l)throw new H("Cannot find wire to remove");return En(t.simulation,l),{v:void 0}}return t.selectedPins.start&&i.value===t.selectedPins.start.wrapper.value?(t.selectedPins.start=null,t.selectedPins.end=null):t.selectedPins.end&&i.value===t.selectedPins.end.wrapper.value?(t.selectedPins.start=null,t.selectedPins.end=null):(2&i.value.type)>>1?t.selectedPins.start={wrapper:i,transform:o}:1&i.value.type&&(t.selectedPins.end={wrapper:i,transform:o}),t.selectedPins.start&&t.selectedPins.end&&(t.simulation.wires.push(new At(t.selectedPins.start.wrapper,t.selectedPins.end.wrapper)),t.selectedPins.start=null,t.selectedPins.end=null),{v:void 0}}},h=l[Symbol.iterator]();!(c=(m=h.next()).done);c=!0){var v=d();if("object"===_n(v))return v.v}}catch(t){f=!0,p=t}finally{try{c||null==h.return||h.return()}finally{if(f)throw p}}}gt.value||e.button!==yt||t.clearSelection(),e.button===ht?t.mouseState|=2:e.button===vt&&(t.selectedArea.position=t.lastMousePosition,t.selectedArea.scale=[0,0],t.mouseState|=4)}),this.mouseUpOutput.subscribe(function(e){if(e.button===dt){var n=t.getSelected(),r=!0,a=!1,i=void 0;try{for(var o,u=n[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){o.value.transform.rotation=0}}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}if(t.selectedGates.temporary.clear(),t.mouseState&=4,t.mouseState>>1&1||1&t.mouseState)throw new H("First 2 bits of mouseState need to be set to 0")}if(e.button===vt&&t.mouseState>>2&1){t.mouseState&=3;var l=Cn(t.selectedArea,Array.from(t.simulation.gates)),s=!0,c=!1,f=void 0;try{for(var p,m=l[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var d=p.value.id;Ke(t,"permanent",d);var h=t.simulation.gates.get(d);if(!h)throw new H("Cannot find node in gate storage with id ".concat(d));t.simulation.gates.moveOnTop(h)}}catch(t){c=!0,f=t}finally{try{s||null==m.return||m.return()}finally{if(c)throw f}}}}),this.mouseMoveOutput.subscribe(function(e){On=e.position;var n=t.camera.toWordPostition(e.position),r=Pe(Te(t.lastMousePosition,n)),a=r.map(function(e,n){return e*t.camera.transform.scale[n]});if(1&t.mouseState){var i=!0,o=!1,u=void 0;try{for(var l,s=t.getSelected()[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value.transform;c.x-=r[0],c.y-=r[1]}}catch(t){o=!0,u=t}finally{try{i||null==s.return||s.return()}finally{if(o)throw u}}}t.mouseState>>1&1&&(t.camera.transform.position=Ee(t.camera.transform.position,Pe(a)),t.spawnCount=0),t.mouseState>>2&1&&(t.selectedArea.scale=Te(t.selectedArea.position,t.camera.toWordPostition(e.position))),t.lastMousePosition=t.camera.toWordPostition(e.position)}),this.reloadSave()}},{key:"updateWheelListener",value:function(){var t=this;this.ref.current&&this.ref.current.addEventListener("wheel",function(e){var n,r,a,i,o,u,l;jn()||(e.preventDefault(),n=e,r=t.camera,a=-n.deltaY/Math.abs(n.deltaY),i=Math.pow(1.3,a),o=cn.scale.map(function(t,e){return On[e]/t}),u=r.transform.scale.map(function(t){return n=xn[1],(r=t*i)<(e=xn[0])?e:r>n?n:r;var e,n,r}),l=r.transform.scale.map(function(t,e){return cn.scale[e]*(u[e]-t)*o[e]}),r.transform.scale=u,r.transform.position=r.transform.position.map(function(t,e){return t-l[e]}))})}},{key:"loadSave",value:function(t){var e,n;this.simulation=Xt(t.simulation),this.camera=(e=t.camera,(n=new qt).transform=Yt(e.transform),n)}},{key:"reloadSave",value:function(){try{ae(this);var t=ne.get(),e=ee.get(t);if(!e)return;if(!e.simulation&&!e.camera)return;this.loadSave(e)}catch(t){throw new Error("An error occured while loading the save: ".concat(t))}}},{key:"getSelected",value:function(){var t=this;return Pn(this.allSelectedIds()).map(function(e){var n=t.simulation.gates.get(e);if(!n)throw new H("Cannot find gate with id ".concat(e));if(!n.data)throw new H("Cannot find data of gate with id ".concat(e));return n.data})}},{key:"allSelectedIds",value:function(){return new Set([].concat(Tn(Pn(this.selectedGates.permanent)),Tn(Pn(this.selectedGates.temporary))))}},{key:"clearSelection",value:function(){this.selectedGates.permanent.clear(),this.selectedGates.temporary.clear()}}])&&In(e.prototype,n),r&&In(e,r),t}();function Rn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Nn=function(t,e){var n=e.position,r=e.rotation,a=e.scale;return t.translate.apply(t,Rn(n)),t.translate(a[0]/2,a[1]/2),t.rotate(r),new y(Ce(a,-.5),a,0)},Wn=function(t,e){var n="rgba(0,0,0,0)";return e.pairs.size&&(n=e.state.value?t.options.gates.pinFill.open:t.options.gates.pinFill.closed),n};var Dn=function(t,e,n){!function(t,e,n){t.save();var r=e.options.gates,a=r.connectionLength,i=r.pinRadius,o=r.pinStrokeColor,u=r.pinStrokeWidth,l=Nn(t,n.transform);t.strokeStyle=o,t.lineWidth=u;var s=!0,c=!1,f=void 0;try{for(var p,m=n.pins[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var d=p.value;t.fillStyle=Wn(e,d.value);var h=wn(l,d.value.type,a),v=bn(l,d.index,d.total),y=Sn(h,d.value.type,a),g=v+l.y;t.beginPath(),t.moveTo(h,g),t.lineTo(h+a,g),t.stroke(),t.beginPath(),t.ellipse(y,g,i,i,0,0,2*Math.PI),t.fill(),t.stroke()}}catch(t){c=!0,f=t}finally{try{s||null==m.return||m.return()}finally{if(c)throw f}}t.restore()}(t,e,n),e.mouseState>>2&&Cn(e.selectedArea,[n]).length||Ue(e,n.id)?t.strokeStyle=e.options.gates.gateStroke.active:t.strokeStyle=e.options.gates.gateStroke.normal,t.lineWidth=e.options.gates.gateStroke.width,t.save();var r=Nn(t,n.transform),a=[r.x,r.y,r.width,r.height,n.template.shape.rounded?n.template.shape.radius:0];"image"===n.template.material.type&&function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:100,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:5;t.beginPath(),t.moveTo(n+o,r),t.lineTo(n+a-o,r),t.quadraticCurveTo(n+a,r,n+a,r+o),t.lineTo(n+a,r+i-o),t.quadraticCurveTo(n+a,r+i,n+a-o,r+i),t.lineTo(n+o,r+i),t.quadraticCurveTo(n,r+i,n,r+i-o),t.lineTo(n,r+o),t.quadraticCurveTo(n,r,n+o,r),t.closePath(),t.save(),t.clip(),t.drawImage(e,n,r,a,i),t.restore()}.apply(void 0,[t,kt.get(n.template.material.value)].concat(a)),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;t.beginPath(),t.moveTo(e+i,n),t.lineTo(e+r-i,n),t.quadraticCurveTo(e+r,n,e+r,n+i),t.lineTo(e+r,n+a-i),t.quadraticCurveTo(e+r,n+a,e+r-i,n+a),t.lineTo(e+i,n+a),t.quadraticCurveTo(e,n+a,e,n+a-i),t.lineTo(e,n+i),t.quadraticCurveTo(e,n,e+i,n),t.closePath()}.apply(void 0,[t].concat(a)),"color"===n.template.material.type&&(t.fillStyle=n.template.material.value,t.fill()),t.stroke(),t.restore()};function qn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Gn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var zn=function(t,e,n){var r=n.start,a=n.end,i=kn(e,r.value.gate.transform,r),o=kn(e,a.value.gate.transform,a),u=e.options.wires.curvePointOffset,l=(i[1]+o[1])/2,s=[i[0]+u,o[0]-u];if(t.strokeStyle=Wn(e,r.value),t.lineWidth=function(t){return 2*(t.options.gates.pinRadius-t.options.gates.pinStrokeWidth)}(e),t.lineCap="round",t.beginPath(),t.moveTo.apply(t,Gn(i)),i[0]<o[0])t.bezierCurveTo.apply(t,[s[0],i[1],s[1],o[1]].concat(Gn(o)));else{var c=Math.abs,f=Math.PI,p=i[1]<o[1]?1:-1,m=[p,p],d=Gn(Array(2)).fill(c((l-i[1])/2));d[0]<70&&(m[0]*=-1,d[0]=70,d[1]=c((i[1]+2*m[0]*d[0]-o[1])/2));var h=[i[1]+m[0]*d[0],o[1]-m[1]*d[1]];t.arc(s[0],h[0],d[0],-m[0]*f/2,m[0]*f/2,1!==m[0]),t.lineTo(s[1],o[1]-2*m[1]*d[1]),t.arc(s[1],h[1],d[1],-m[1]*f/2,m[1]*f/2,1===m[1]),t.lineTo.apply(t,Gn(o))}t.stroke()};function Fn(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Ln(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Yn=function(t,e){!function(t){t.clearRect(0,0,cn.width,cn.height)}(t);var n=e.camera.transform;t.translate.apply(t,Ln(n.position)),t.scale.apply(t,Ln(n.scale));var r=!0,a=!1,i=void 0;try{for(var o,u=e.simulation.wires[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value;zn(t,e,l)}}catch(t){a=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(a)throw i}}var s=!0,c=!1,f=void 0;try{for(var p,m=e.simulation.gates[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var d=p.value;Dn(t,e,d)}}catch(t){c=!0,f=t}finally{try{s||null==m.return||m.return()}finally{if(c)throw f}}!function(t,e){var n=null;if(e.selectedPins.start?n=e.selectedPins.start:e.selectedPins.end&&(n=e.selectedPins.end),n){var r=kn(e,n.transform,n.wrapper);t.strokeStyle=e.options.wires.temporaryWireColor,t.lineWidth=2*e.options.gates.pinRadius,t.lineCap="round",t.beginPath(),t.moveTo.apply(t,qn(r)),t.lineTo.apply(t,qn(e.lastMousePosition)),t.stroke()}}(t,e),function(t,e){e.mouseState>>2&&(t.fillStyle=e.options.selecting.fill,t.strokeStyle=e.options.selecting.stroke,t.beginPath(),t.rect.apply(t,Fn(e.selectedArea.getBoundingBox())),t.fill(),t.stroke())}(t,e),t.scale.apply(t,Ln(n.scale.map(function(t){return 1/t}))),t.translate.apply(t,Ln(Pe(n.position)))},Xn=new ut.a;function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Jn(t,e){return!e||"object"!==Bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Un(t){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jn(this,Un(e).call(this,t))).canvasRef=Object(r.createRef)(),n.renderingContext=void 0,n.renderer=new Mn(n.canvasRef),re.next(n.renderer),dn.a.setDraw(function(){n.renderingContext&&Yn(n.renderingContext,n.renderer)}),n}var n,i,o;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(e,r["Component"]),n=e,(i=[{key:"componentDidMount",value:function(){Xn.next(!0),this.canvasRef.current&&(this.renderingContext=this.canvasRef.current.getContext("2d"),this.renderer.updateWheelListener()),dn.a.start()}},{key:"componentWillUnmount",value:function(){dn.a.stop()}},{key:"render",value:function(){return a.a.createElement(pn,{ref:this.canvasRef,mouseDownOuput:this.renderer.mouseDownOutput,mouseUpOutput:this.renderer.mouseUpOutput,mouseMoveOutput:this.renderer.mouseMoveOutput})}}])&&Hn(n.prototype,i),o&&Hn(n,o),e}(),Vn=n(165),Zn=n(166),$n=(n(119),[{mode:"project",icon:"gamepad"},{icon:"memory",mode:"ic"}]),tr=function(){var t=Object(f.a)(function(){return we.data.open},!1),e=ue();return a.a.createElement("div",{className:t?"shown":"",id:"create-content",onClick:function(){we.actions.next("quit")}},a.a.createElement("div",{id:"create-title"},e.createSimulation.mode.question),a.a.createElement("div",{id:"create-options"},$n.map(function(t,n){return a.a.createElement("div",{key:n,className:"create-option",onClick:function(e){e.stopPropagation(),we.data.output.next(t.mode),we.actions.next("submit")}},a.a.createElement("div",{className:"create-option-icon"},a.a.createElement(A.a,null,t.icon)),a.a.createElement("div",{className:"create-option-name",id:t.mode},e.createSimulation.mode.options[t.mode]))})))},er=(n(120),function(){var t=Object(f.a)(function(){return ye.data.open},!1),e=Object(f.a)(function(){return ye.data.question},""),n=Object(f.a)(function(){return ye.data.output},"");return a.a.createElement("div",{id:"input-container",onClick:function(){ye.actions.next("quit")},className:t?"visible":""},a.a.createElement("div",{id:"input-title"},e),a.a.createElement("input",{autoFocus:!0,value:n,onClick:function(t){t.stopPropagation()},type:"text",id:"actual-input",onChange:function(t){var e=t.target;ye.data.output.next(e.value)},onKeyDown:function(t){if(st()("enter")===t.keyCode)return t.preventDefault(),ye.actions.next("submit")}}))}),nr=n(121),rr=n.n(nr),ar=function(){return a.a.createElement(rr.a,null,a.a.createElement("title",null,"Logic gate simulator"),a.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"}),a.a.createElement("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/icon?family=Material+Icons"}),a.a.createElement("meta",{name:"viewport",content:"minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no"}),a.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Righteous&display=swap",rel:"stylesheet"}),a.a.createElement("link",{rel:"icon",href:n(127)}))},ir=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ar,null),a.a.createElement(Vn.a,null),a.a.createElement(Zn.a,{theme:s},a.a.createElement(Vn.a,null),a.a.createElement(Qn,null),a.a.createElement(an,null),a.a.createElement(tr,null),a.a.createElement(er,null),a.a.createElement(We,null)),a.a.createElement(i.a,{position:"top-left",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,draggable:!0,pauseOnHover:!0}))},or=n(14);function ur(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var lr={},sr=Object.values(tn).filter(function(t){return t.keybinding}).map(function(t){return{actions:[t.action],keys:t.keybinding||[]}}),cr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sr,e=new Set,n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var u=i.value,l=!0,s=!1,c=void 0;try{for(var f,p=u.keys[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var m=f.value;e.add(m)}}catch(t){s=!0,c=t}finally{try{l||null==p.return||p.return()}finally{if(s)throw c}}}}catch(t){r=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(r)throw a}}var d=!0,h=!1,v=void 0;try{for(var y,g=e.values()[Symbol.iterator]();!(d=(y=g.next()).done);d=!0){var b=y.value;lr[b]=new ft(b)}}catch(t){h=!0,v=t}finally{try{d||null==g.return||g.return()}finally{if(h)throw v}}window.addEventListener("keydown",function(e){if(!jn()){var n=[],r=!0,a=!1,i=void 0;try{for(var o,u=function(){var t=o.value,e=!1,r=!0,a=!1,i=void 0;try{for(var u,l=t.keys[Symbol.iterator]();!(r=(u=l.next()).done);r=!0){var s=u.value;if(!e&&!lr[s].value){e=!0;break}}}catch(t){a=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}if(e)return"continue";n.push({keys:t.keys,callback:function(){var e=!0,n=!1,r=void 0;try{for(var a,i=t.actions[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){(0,a.value)()}}catch(t){n=!0,r=t}finally{try{e||null==i.return||i.return()}finally{if(n)throw r}}}})},l=t[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)u()}catch(t){a=!0,i=t}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}if(n.length){for(var s=0,c=n[0].keys.length,f=1;f<n.length;f++){var p=n[f];p.keys.length>c&&(c=p.keys.length,s=f)}n[s].callback(),e.preventDefault(),e.stopPropagation()}}})},fr=function(){var t=!0,e=!1,n=void 0;try{for(var r,a=M[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value;if(!i.metadata||!i.metadata.name)throw new H("Template ".concat(JSON.stringify(i)," cannot be stored."));Z.set(i.metadata.name,i)}}catch(t){e=!0,n=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw n}}};function pr(t,e,n,r,a,i,o){try{var u=t[i](o),l=u.value}catch(t){return void n(t)}u.done?e(l):Promise.resolve(l).then(r,a)}n.d(e,"start",function(){return mr});var mr=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){pr(i,r,a,o,u,"next",t)}function u(t){pr(i,r,a,o,u,"throw",t)}o(void 0)})}}(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.clear(),e=Xn.pipe(Object(me.a)(1)).toPromise(),window.onerror=function(t,e,n,r,a){if(a){var o=W(a.toString());i.b.error.apply(i.b,ur(o))}},cr(),fr(),console.log("%c Hello\n        %c I don't know if you see this, \n        but if you do than you are probably wondering... \n        Why did I include this? The answer is - I don't know. \n        At first, it seemed like a good idea to include a welcome message in the console\n        (in case someone randomly openes it), but now i don't even know what i'm doing :) \n        Anyways, I hope you are having a good time in my simulator!!!".split("\n").map(function(t){return t.trim()}).join(" "),"".concat("font-size: 3em;"),"".concat("padding: 3px")),Object(or.render)(a.a.createElement(ir,null),document.getElementById("app")),t.next=9,e;case 9:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}()},82:function(t,e,n){},83:function(t,e,n){},87:function(t,e,n){t.exports=n.p+"fba1e150c35116cf8bc32589d933095d.jpg"},88:function(t,e,n){t.exports=n.p+"be700b5a8d385f7549c3cc560425de8b.png"},89:function(t,e,n){t.exports=n.p+"434fae6a4b5b48eff5a424e3b5ec95d5.png"},90:function(t,e,n){t.exports=n.p+"543554c16bc630835af9efed9e009847.png"},91:function(t,e,n){}}]);
//# sourceMappingURL=2.js.map